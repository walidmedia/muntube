{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>MunTube</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Roboto:wght@500;700&display=swap" rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="{% static 'lib/owlcarousel/assets/owl.carousel.min.css' %}" rel="stylesheet">
    <link href="{% static 'lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css' %}" rel="stylesheet" />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
</head>
<style>

    :root {
    --primary: #9c999a;
    --secondary: #191C24;
    --light: #6C7293;
    --dark: #000000;
}

    .mobile-nav {
  background: #000;
  position: fixed;
  bottom: 0;
  height: 65px;
  width: 100%;
  display: flex;
  justify-content: space-around;
        z-index:10;
}
    .bloc-icon {
  display: flex;
  justify-content: center;
  align-items: center;
}
    .bloc-icon img {
  width: 30px;
}
    @media screen and (min-width: 600px) {
  .mobile-nav {
  display: none;
  }
}
    #bars {
  display: block;
}

@media only screen and (max-width: 767px) {
  #bars {
    display: none;
  }
}
.search-container {
  position: relative;
  display: inline-block;
}

#search-input {
  width: 0;
  height: 0;
  padding: 0;
  opacity: 0;
  transition: all 0.5s ease-in-out;
}

.search-icon {
  cursor: pointer;
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
}

.search-open #search-input {
  width: 600px;
  height: 40px;
  padding: 10px;
  opacity: 1;
}
@media only screen and (max-width: 767px) {
  .search-open {
    display: flex;
    flex-direction: column;
    position: absolute;
    top: 60px;
    left: 0;
    right: 0;
    background-color: #191C24;
  }

  .search-open #search-input {
    width: 100%;
    height: 40px;
    padding: 10px;
    opacity: 1;
    margin-top: 10px;
  }
}
::-webkit-scrollbar {
  width: 10px;
}

::-webkit-scrollbar-track {
  background-color: #191C24;
}

::-webkit-scrollbar-thumb {
  background-color: dimgrey;
}

</style>

    <div class="container-fluid position-relative d-flex p-0">



        <!-- Sidebar Start -->
        <div id="sidebar" class="sidebar pe-4 pb-3">
            <nav class="navbar bg-secondary navbar-dark">
                <a href="{% url 'index' %}" class="navbar-brand mx-4 mb-3">
                    <img width="110%" height="" src="{% static 'images/logo-muntube-blanc.png' %}">
                </a>
                <!--<div class="d-flex align-items-center ms-4 mb-4">
                    <div class="position-relative">
                        <img class="rounded-circle" src="{% static 'img/user.jpg' %}" alt="" style="width: 40px; height: 40px;">
                        <div class="bg-success rounded-circle border border-2 border-white position-absolute end-0 bottom-0 p-1"></div>
                    </div>
                    <div class="ms-3">
                        <h6 class="mb-0">Jhon Doe</h6>
                        <span>Admin</span>
                    </div>
                </div>-->
                <div  class="navbar-nav w-100">
                    <a href="{% url 'index' %}" class="nav-item nav-link"><i  style="background-color: #B88E6D; color: #000"class="fa fa-home me-2"></i><strong style="color: white">Accueil</strong></a>
                    <!--<a href="{% url 'bibliothèque' %}" class="nav-item nav-link"><i  style="background-color: #B88E6D; color: #000"class="fa fa-book me-2"></i><strong style="color: white">Bibliothèque</strong></a>-->
                    <a href="{% url 'view_history' %}" class="nav-item nav-link"><i style="background-color: #B88E6D; color: #000" class="fa fa-history me-2"></i><strong style="color: white">Historique</strong></a>
                    <a href="{% url 'a_regarder' %}" class="nav-item nav-link"><i style="background-color: #B88E6D; color: #000" class="fa fa-eye me-2"></i><strong style="color: white">A regarder</strong></a>
                    <a href="{% url 'vidéosjaime' %}" class="nav-item nav-link"><i style="background-color: #B88E6D; color: #000" class="fa fa-star me-2"></i><strong style="color: white">Vidéos "j'aime"</strong></a>
                    <a><hr></a>
                    <a href="{% url 'chaine' %}" class="nav-item nav-link"><i style="background-color: #B88E6D; color: #000" class="fa fa-photo-video me-2"></i><strong style="color: white">Chaîne</strong></a>
                    <a href="{% url 'upload' %}" class="nav-item nav-link"><i style="background-color: #B88E6D; color: #000" class="fa fa-video me-2"></i><strong style="color: white">Créer</strong></a>
                    <a><hr></a>
                    <a href="{% url 'soutenir' %}" class="nav-item nav-link"><i style="background-color: #B88E6D; color: #000" class="fa fa-hands-helping me-2"></i><strong style="color: white">Nous Soutenir</strong></a>
                    <a><hr></a>
                    <a href="{% url 'maintenance' %}" class="nav-item nav-link"><i style="background-color: #B88E6D; color: #000" class="fa fa-chart-bar me-2"></i><strong style="color: white">Aide</strong></a>
                    <a><hr></a>
                    <a style="padding-left: 10px; color: #B88E6D"><i class="fa fa-copyright"></i><strong>
                        2023 par STEAM BEAM<br>
                        Tout droits réservés
                    </strong></a>
                </div>
            </nav>
        </div>
        <!-- Sidebar End -->


        <!-- Content Start -->
        <div class="content">
            <!-- Navbar Start -->
            <nav class="navbar navbar-expand bg-secondary navbar-dark sticky-top px-4 py-0">
                <a href="index.html" class="navbar-brand d-flex d-lg-none me-4">
                    <h2 class="text-primary mb-0"><i class="fa fa-"></i></h2>
                </a>
            <div id="bars">
                <a href="#" class="sidebar-toggler flex-shrink-0" style="color: #B88E6D;
                text-decoration: none;">
                    <i class="fa fa-bars"></i>
                </a>
            </div>


                <div class="navbar-nav align-items-center ms-auto">

                    <div class="search-container">
                      <form action="{% url 'search' %}" method="get">
                        <input type="text" name="q" id="search-input" placeholder="Rechercher">
                      </form>
                      <div class="search-icon" onclick="openSearch()">
                        <i class="fa fa-search"></i>
                      </div>
                    </div>

                    <script>
                        function openSearch() {
  let searchContainer = document.querySelector(".search-container");
  let searchInput = document.getElementById("search-input");
  searchContainer.classList.toggle("search-open");

  if (searchInput.value) {
    searchInput.form.submit();
  }
}

function performSearch(event) {
  if (event.type === "submit" || event.keyCode === 13) {
    event.preventDefault();
    let searchInput = document.getElementById("search-input").value;
    console.log("Searching for: " + searchInput);

    // Perform search and get result
    let result = performSearch(searchInput);
    console.log("Search result: " + result);
  }
}

// Add the event listener to the form
document.querySelector("form").addEventListener("submit", performSearch);

// Add the event listener to the search input
document.querySelector("#search-input").addEventListener("keyup", performSearch);

// Add the event listener to the search icon
document.querySelector(".search-icon").addEventListener("click", performSearch);

                    </script>
                    <!--<form action="{% url 'search' %}" method="get" class="navbar-nav">
                        <input class="form-control bg-dark border-0" type="text" placeholder="Rechercher">
                    </form>-->
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link" data-bs-toggle="dropdown">
                            <i style="background-color: #B88E6D;color: black" class="fa fa-bell"></i>
                            <span class="d-none d-lg-inline-flex"></span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end bg-secondary border-0 rounded-0 rounded-bottom m-0">
                            {% for n in notifs %}
                                {% if n.recipient.id == user.id %}
                                <a href="#" class="dropdown-item">
                                    <h6 class="fw-normal mb-0" style="color:#B88E6D;">{{ n.subject }}</h6>
                                    <small style="color:#72473b;">Il ya {{ n.timestamp|timesince}}</small>
                                </a>
                                <hr class="dropdown-divider">
                                {% endif %}
                            {% endfor %}
                            <a href="#" class="dropdown-item text-center" style="color: #B88E6D">Voir tout</a>
                        </div>
                    </div>
                    <div class="nav-item dropdown">
                    {% if user.is_authenticated %}
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                            <img class="rounded-circle me-lg-2" src="{% if user.photo == True %}{{ user.photo.url }}{% else %}{% static 'images/profile1.jpg' %}{% endif %}" alt="" style="width: 40px; height: 40px;">
                            <span class="d-none d-lg-inline-flex"><strong class="text-white">{{ user.username }}</strong></span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end bg-secondary border-0 rounded-0 rounded-bottom m-0 ">
                            {% if user.is_authenticated %}
                            <a href="{% url 'monprofile' user.pk %}" class="dropdown-item text-white mb-2"><i style="color: #B88E6D;" class="fa fa-home me-3"></i>Mon Profile</a>
                            {% endif %}
                            <hr class="mt-1 mb-1">
                            <a href="{% url 'chaine' %}" class="dropdown-item text-white"><i style="color: #B88E6D;" class="fa fa-photo-video me-3"></i>Ma chaîne</a>
                            <hr class="mt-1 mb-1">
                            <a href="{% url 'mescommentaires' %}" class="dropdown-item text-white">
                                <i style="color: #B88E6D;" class="fa fa-comment me-3"></i>
                                <span class="me-3">Commentaires</span>
                                <span class="flex-shrink-0 badge badge-center rounded-pill bg-danger w-px-20 h-px-20">
                                    +99
                                </span>
                            </a>
                        <hr class="mt-1 mb-1">
                            <a href="{% url 'mesnotifications' %}" class="dropdown-item text-white">
                                <i style="color: #B88E6D;" class="fa fa-bell me-3"></i>
                                <span class="me-3">Notifications</span>
                                {% if notifs.count > 0 %}
                                <span class="flex-shrink-0 badge badge-center rounded-pill bg-danger w-px-20 h-px-20">
                                    {{ notifs.count }}
                                </span>
                                {% endif %}
                            </a>

                            <hr class="mt-1 mb-1">
                            <a href="{% url 'video_stats' %}" class="dropdown-item text-white"><i style="color: #B88E6D;" class="fa fa-star me-3"></i>Statistiques</a>
                            <hr class="mt-1 mb-1">
                            <a href="{% url 'mesdons' %}" class="dropdown-item text-white"><i style="color: #B88E6D;" class="fa fa-money-bill me-3"></i>Mes dons reçus </a>
                            <hr class="mt-1 mb-1">
                            <a href="{% url 'stripe_info' %}" class="dropdown-item text-white"><i style="color: #B88E6D;" class="fa fa-money-bill me-3"></i>Mon compte Stripe</a>
                            <hr class="mt-1 mb-1">

                            <a href="#mesfilleuls" class="dropdown-item text-white"><i style="color: #B88E6D;" class="fa fa-fill me-3"></i>Mes filleuls professionnels</a>
                            <hr class="mt-1">
                            <a href="{% url 'logout_view' %}" class="dropdown-item text-white"><i style="color: #B88E6D;" class="fa fa-sign-out-alt me-3"></i>Se déconnecter</a>
                        </div>
                    {% else %}
                    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                            <img class="rounded-circle me-lg-2" src="{% static 'images/profile1.jpg' %}" alt="" style="width: 40px; height: 40px;">
                            <span class="d-none d-lg-inline-flex"><strong class="text-white">Se connecter</strong></span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end bg-secondary border-0 rounded-0 rounded-bottom m-0">
                            {% if user.is_authenticated %}
                            <a href="{% url 'monprofile' user.pk %}" class="dropdown-item">Mon Profile</a>
                            {% endif %}

                            <a href="{% url 'login' %}" class="dropdown-item text-white">Se connecter</a>
                        </div>
                    {% endif %}
                    </div>
                </div>
            </nav>
            <!-- Navbar End -->

        <!-- Nav Mobile -->

        <div class="mobile-nav footer">
            {% if user.is_authenticated %}
            <a href="{% url 'index' %}" class="bloc-icon">
                <button style="background-color: #533f03;color: #fdecdd; color: #fdecdd;background: transparent" type="button" class="btn btn-lg btn-lg-square  m-2"><i class="fa fa-home"></i></button>
            </a>
            <a href="{% url 'bibliothèque' %}" class="bloc-icon">
                <button style="background-color: #533f03; color: #fdecdd;background: transparent" type="button" class="btn btn-lg btn-lg-square  m-2"><i class="fa fa-book"></i></button >           </a>
            </a>
            <a href="{% url 'upload' %}" class="bloc-icon">
                <button style="background-color: #533f03; color: #fdecdd; background: transparent" type="button" class="btn btn-lg m-2"><i class="fa fa-plus"></i></button>            </a>
            </a>
            <a href="{% url 'chaine' %}" class="bloc-icon">
                <button style="background-color: #533f03; color: #fdecdd;background: transparent" type="button" class="btn btn-lg btn-lg-square  m-2"><i class="fa fa-photo-video"></i></button>            </a>
            </a>
            <a href="{% url 'monprofile' user.pk %}" class="bloc-icon">
                <button style="background-color: #B88E6D; color: #fdecdd;background: transparent" type="button" class="btn btn-lg btn-lg-square  m-2">
                    <i class="fa fa-user"></i>
                </button>

            </a>
            </a>

            {% else %}
            <a href="{% url 'index' %}" class="bloc-icon">
                <button style="background-color: #533f03;color: #fdecdd; color: #fdecdd;background: transparent" type="button" class="btn btn-lg btn-lg-square  m-2"><i class="fa fa-home"></i></button>
            </a>
            <a href="{% url 'login' %}" class="bloc-icon">
                <button style="background-color: #533f03; color: #fdecdd;background: transparent" type="button" class="btn btn-lg btn-lg-square  m-2"><i class="fa fa-book"></i></button >           </a>
            </a>
            <a href="{% url 'login' %}" class="bloc-icon">
                <button style="background-color: #533f03; color: #fdecdd; background: transparent" type="button" class="btn btn-lg m-2"><i class="fa fa-plus"></i></button>            </a>
            </a>
            <a href="{% url 'login' %}" class="bloc-icon">
                <button style="background-color: #533f03; color: #fdecdd;background: transparent" type="button" class="btn btn-lg btn-lg-square  m-2"><i class="fa fa-photo-video"></i></button>            </a>
            </a>
            <a href="{% url 'login' %}" class="bloc-icon">
                <button style="background-color: #B88E6D; color: #fdecdd;background: transparent" type="button" class="btn btn-lg btn-lg-square  m-2"><i class="fa fa-user"></i></button>            </a>
            </a>
            {% endif %}
        </div>
        <div class="sidebar-toggler" id="sidebarToggler">
          <span class="icon-close" onclick="closeSidebar()"></span>
        </div>

        <!--<a style="background-color: #B88E6D" href="#" class="ouverture_sidebar btn btn-lg btn-warning sidebar-toggler fixed btn-lg-square back-to-top"><i class="fa fa-bars"></i></a>-->
<script>
$(document).click(function(event) {
    if (!$(event.target).closest("#sidebar").length) {
        $("#sidebar").removeClass("show");
    }
});
</script>
    {% block content %}

    {% endblock %}
